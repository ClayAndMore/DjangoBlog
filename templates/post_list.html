{% extends "index_basic.html" %}

{% block css_content %}
<script src="/static/js/bootstrap-treeview.js"></script>

<script src="/static/css/bootstrap-treeview.css"></script>
<style type="text/css">
    ul.nav-pills{
        width: 300px;
    }
    ul.nav-pills.affix{
        top: 10px; /* Set the top position of pinned element */
    }
    #lists ul li{
        padding: 2px;
    }
</style>

<script type="text/javascript">
    $(document).ready(function(){
        $("#myNav").affix({
            offset: {
                top: 320
            }
        });
    });
</script>

{% endblock %}

{% block main_body %}
    <!--<div class="bs-component" style="margin: 0px">-->
    <!--    <ul class="breadcrumb" style="margin: 0px">-->
    <!--      <li><a href="#">Home</a></li> -->
    <!--      <li><a href="#">Library</a></li> -->
    <!--          <li class="active">Data</li> -->
    <!--    </ul> -->
     <!--</div>-->

    <div class="container">
        <div class="row">
            <div class="col-xs-3 pull-left contailner">
                <div class="row">        
                    <div id="tree" class="col-xs-11 pull-left"></div>
                    <div class="col-xs-1 pull-left"></div>
                </div>
            </div>
        <!--<div class="list-group col-xs-9">-->
	<!--{% for da in data %}-->
	 <!--<a href="{% url 'post' inum=da.inum %}" class="list-group-item">-->
		<!--<h4 class="list-group-item-heading" style="display:inline">{{ da.title }}</h4>-->
		<!--<h5 style="display:inline;float:right" >{{ da.time }}</h5>-->
        <!--</a>-->
	<!--<br>-->
	<!--{% endfor %}-->

        <div id="tochange" class="col-xs-8"> </div>
        <div class="col-xs-1" id="myScrollspy">
            <ul class="nav nav-pills nav-stacked" id="myNav">
                <!--<li class="active"><a href="#html">HTML</a></li>-->

            </ul>
        </div>



      </div>
    </div>

<xmp theme="a"  style="display:none;">
{{ file_content|safe }}
</xmp>

<script src="/static/js/strapdown.js"></script>

<script>
     function dir_list() {
         var url = "/p/dir_list/";
         var back = [];
         $.ajax({
             type: "get",
             url: url,
             async: false,
             dataType: "json",
             success: function (result) {
                  back = result;
             // console.log(result);
             //render_life(result);
             },
              error: function(XMLHttpRequest, textStatus, errorThrown) {
                  //alert(XMLHttpRequest.status);
                  alert(XMLHttpRequest.readyState);
                  alert(textStatus);
              },
         });
         return back;
    }

   var mark_html = $("#content").html();
   $("#tochange").append(mark_html);
   // 切掉原来的
   $("#content").remove();
   //添加链接
   add_h_id = '';
   var add_h = 1;
   $(":header").each(function () {
       add_h_id = 'add_h'+add_h ;
       console.log(add_h_id);
       $(this).attr('id',add_h_id);
       var toadd = '<li><a href="#'+ add_h_id +'" style="font-size:15px" >'+ $(this).text() +'</a></li>';
       $("#myNav").append(toadd);
       add_h +=1;
       console.log(add_h);
   });

    $('#tree').treeview({data: dir_list()});
</script>


<div class="">
      <div class="bs-component">
          <blockquote>
            <p>没有什么是一顿烧烤是解决不了的，如果有，那么就两顿</p>
            <small> 尼古拉斯 <cite title="Source Title">-赵四</cite></small>
          </blockquote>
      </div>
    <div class="bs-component">
        <blockquote>
            <p>我从春天里来，而你恰好也在~</p>
            <small> 春风十里 <cite title="Source Title">不如你</cite></small>
        </blockquote>
    </div>
</div>
{% endblock %}
